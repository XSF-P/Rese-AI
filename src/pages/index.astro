---
import Layout from '../layouts/Layout.astro';
import {MovieGrid} from '@/components/MovieGrid';
---

<Layout
	title="Reseñas de peliculas resumidas | Morevie"
	description="Reseñas de películas generadas por IA basadas en opiniones reales de usuarios">
	<div class="relative min-h-screen">
		<!-- Hero Section with Scroll Effect -->
		<div id="hero" class="fixed top-0 left-0 w-full h-screen max-h-[800px] flex items-center justify-center bg-gradient-to-r from-blue-600/20 via-purple-600/20 to-indigo-600/20 z-0 transition-opacity duration-1000" style="opacity: 1;">
			<div class="absolute inset-0 bg-black/5"></div>
			<div class="relative z-10 text-center px-4">
				<h1 class="text-6xl md:text-8xl font-bold text-white mb-6 tracking-tighter">
					Reseñ<span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-300 to-purple-400 hover:from-blue-200 hover:to-purple-300 transition-all duration-300">AI</span>
				</h1>
				<p class="text-xl md:text-2xl text-gray-100 max-w-2xl mx-auto mb-12">
					Descubre lo que realmente piensan los espectadores, resumido en segundos
				</p>
			</div>
		</div>

		<!-- Content Overlay with Scroll Transition -->
		<div class="relative z-10 pt-[100vh] bg-gradient-to-b from-transparent via-black/80 to-black">
			<!-- Features Section with Enhanced Blur Effects -->
			<div class="container mx-auto px-4 py-32 -mt-20 relative z-20 mb-4">
				<div class="grid grid-cols-2 gap-4 max-w-6xl mx-auto mt-10 ">
					<div class="bg-gray-900 p-4 rounded-lg shadow-md border-2 border-transparent transition-all duration-300 hover:border-cyan-400 hover:scale-105">
						<p class="text-white font-bold">¿De qué trata esta web?</p>
						<p class="text-white">En esta página encontrarás una colección de películas con reseñas generadas a partir de lo que opinan realmente los espectadores. En lugar de críticas tradicionales, usamos inteligencia artificial para resumir cientos de comentarios y darte una idea clara de lo que piensa la mayoría.</p>
					</div>
					<div class="bg-gray-900 p-4 rounded-lg shadow-md border-2 border-transparent transition-all duration-300 hover:border-cyan-400 hover:scale-105">
						<p class="text-white font-bold">Reseñas hechas con inteligencia colectiva</p>
						<p class="text-white">Las reseñas que ves aquí no vienen de una sola persona, sino de muchas. Analizamos opiniones reales de usuarios en internet y las convertimos en resúmenes fáciles de leer. Así sabrás si una película es emocionante, aburrida, divertida o impactante según quienes ya la vieron.</p>
					</div>
					<div class="bg-gray-900 p-4 rounded-lg shadow-md border-2 border-transparent transition-all duration-300 hover:border-cyan-400 hover:scale-105">
						<p class="text-white font-bold">Una forma diferente de elegir qué ver</p>
						<p class="text-white">¿Cansado de reseñas que no te dicen nada? Aquí te ayudamos a decidir qué película ver basándonos en lo que dice la gente, no solo en números o estrellas. Descubre lo que otros sienten y piensan, resumido en unos pocos párrafos.</p>
					</div>
					<div class="bg-gray-900 p-4 rounded-lg shadow-md border-2 border-transparent transition-all duration-300 hover:border-cyan-400 hover:scale-105">
						<p class="text-white font-bold">Opiniones reales, sin rodeos</p>
						<p class="text-white">Nuestra web está pensada para quienes quieren una visión honesta y directa sobre una película. Usamos tecnología para leer miles de opiniones y convertirlas en un resumen claro, sin spoilers y sin tecnicismos.</p>
					</div>
				</div>
			</div>

			<!-- Authors Section with Glass Effect -->
			<div class="py-32 bg-black">
				<div class="container mx-auto px-4 backdrop-blur-md">
					<h2 id="teamHeading" class="text-4xl font-bold text-center mb-16 backdrop-blur-sm py-2 transition-all duration-500 text-white">Nuestro Equipo</h2>
					<div class="flex flex-wrap justify-center gap-8 backdrop-blur-sm">
						<div class="w-72 text-center group bg-white/10 backdrop-blur-sm rounded-2xl p-6 hover:bg-white/20 transition-all duration-300">
							<div class="relative overflow-hidden mx-auto mb-4">
								<img class="rounded-full w-30 h-50 mx-auto transition-transform duration-500 group-hover:scale-105" src="/Jeiler.webp" alt="Jeiler Gutierrez" />
							</div>
							<h3 class="text-xl font-bold text-white group-hover:text-blue-400 transition-colors duration-300">Jeiler Gutierrez</h3>
							<p class="text-gray-300 group-hover:text-blue-200 transition-colors duration-300">Estudiante</p>
						</div>
						<div class="w-72 text-center group bg-white/10 backdrop-blur-sm rounded-2xl p-6 hover:bg-white/20 transition-all duration-300">
							<div class="relative overflow-hidden mx-auto mb-4">
								<img class="rounded-full w-30 h-50 mx-auto transition-transform duration-500 group-hover:scale-105" src="/Carlos.webp" alt="Carlos Romero" />
							</div>
							<h3 class="text-xl font-bold text-white group-hover:text-purple-400 transition-colors duration-300">Carlos Romero</h3>
							<p class="text-gray-300 group-hover:text-purple-200 transition-colors duration-300">Estudiante</p>
						</div>
						<div class="w-72 text-center group bg-white/10 backdrop-blur-sm rounded-2xl p-6 hover:bg-white/20 transition-all duration-300">
							<div class="relative overflow-hidden mx-auto mb-4">
								<img class="rounded-full w-30 h-50 mx-auto transition-transform duration-500 group-hover:scale-105" src="/Felipe.webp" alt="Felipe Alvear" />
							</div>
							<h3 class="text-xl font-bold text-white group-hover:text-indigo-400 transition-colors duration-300">Felipe Alvear</h3>
							<p class="text-gray-300 group-hover:text-indigo-200 transition-colors duration-300">Estudiante</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- MovieGrid section is now a separate div with higher z-index -->
	<div class="relative z-20 bg-black">
		<MovieGrid client:load />
	</div>

	<script>
		document.addEventListener('DOMContentLoaded', () => {
			const hero = document.getElementById('hero');
			const teamHeading = document.getElementById('teamHeading');
			let hasColorChanged = false;
			
			// Check if user is coming back from another page
			const checkIfReturnedFromDetail = () => {
				const urlParams = new URLSearchParams(window.location.search);
				return urlParams.has('fromDetail') || document.referrer.includes('/movies/');
			};
			
			if (hero) {
				const heroHeight = hero.offsetHeight;
				
				// If returning from detail page, hide hero immediately
				if (checkIfReturnedFromDetail()) {
					hero.style.opacity = "0";
					hero.style.visibility = "hidden";
				}
				
				window.addEventListener('scroll', () => {
					const scrollPosition = window.scrollY;
					// Calcula la opacidad basada en el scroll (0 a 1)
					const opacity = 1 - Math.min(scrollPosition / (heroHeight * 0.7), 1);
					hero.style.opacity = opacity.toString();
					
					// Esconder el hero completamente cuando la opacidad es muy baja
					if (opacity < 0.05) {
						hero.style.visibility = 'hidden';
					} else {
						hero.style.visibility = 'visible';
					}
					
					// Efecto parallax suave
					hero.style.transform = `translateY(${scrollPosition * 0.3}px)`;
					
					// Cambiar color del título del equipo cuando se hace scroll
					if (teamHeading) {
						const teamSection = document.querySelector('.py-32.bg-black');
						if (teamSection) {
							const teamPosition = teamSection.getBoundingClientRect().top;
							
							if (teamPosition < window.innerHeight * 0.8 && !hasColorChanged) {
								teamHeading.classList.remove('text-white');
								teamHeading.style.background = 'linear-gradient(to right, #3b82f6, #8b5cf6, #ec4899)';
								teamHeading.style.webkitBackgroundClip = 'text';
								teamHeading.style.backgroundClip = 'text';
								teamHeading.style.color = 'transparent';
								teamHeading.style.transform = 'scale(1.05)';
								hasColorChanged = true;
							} else if (teamPosition > window.innerHeight && hasColorChanged) {
								teamHeading.classList.add('text-white');
								teamHeading.style.background = '';
								teamHeading.style.webkitBackgroundClip = '';
								teamHeading.style.backgroundClip = '';
								teamHeading.style.color = '';
								teamHeading.style.transform = 'scale(1)';
								hasColorChanged = false;
							}
						}
					}
				});
			}
		});
	</script>
</Layout>
